!function(t,o){"function"==typeof define&&define.amd?define(["jquery","common","select"],function(t,e,i){return o(t,e,i)}):"object"==typeof module&&module.exports?module.exports=o(require("jquery")):o(t.jQuery)}(this,function(t,o,e){!function(t){"use strict";function e(o,e){var n=arguments,a=this.filter("select"),s=o,c=e;[].shift.apply(n);var r,d={rootCode:"000000000",auth:!1,isEnable:"1",isSelectOne:!0,emptySelect:!0};if(a){var l=a.data("SelectArea"),h="object"==typeof s&&s;if(l){if(h)for(var p in h)h.hasOwnProperty(p)&&(l.options[p]=h[p])}else{var u=t.extend(!0,d,h);a.data("SelectArea",l=new i(a,u,c))}"string"==typeof s&&(r=l[s]instanceof Function?l[s].apply(l,n):l.options[s])}return void 0!==r?r:this}var i=function(o,e,n){var a=this;this.$element=t(o),this.options=e,this.$element.each(function(){var o=t(this);"province"===o.data("areaId")?a.province=this:"city"===o.data("areaId")?a.city=this:"county"===o.data("areaId")?a.county=this:"town"===o.data("areaId")&&(a.town=this)}),this.postUrl=this.options.auth?"common/getDictZoneListForAuth":"common/getDictZoneList",this.reset=i.prototype.init,this.reload=i.prototype.reload,this.init()};i.VERSION="2.0.1",i.prototype={constructor:i,reload:function(t){var o={};o.rootCode=this.options.rootCode,o.provinceCode=t.provinceCode,o.cityCode=t.cityCode,o.countyCode=t.countyCode,o.isEnable="2"==this.options.isEnable?"":this.options.isEnable,this.loadData(o)},init:function(){var o=t(this.province).data("areaValue"),e=t(this.city).data("areaValue"),i=t(this.county).data("areaValue"),n=t(this.town).data("areaValue"),a={};a.rootCode=this.options.rootCode,a.provinceCode=o,a.cityCode=e,a.countyCode=i,a.townCode=n,a.isEnable="2"==this.options.isEnable?"":this.options.isEnable,this.loadData(a)},loadData:function(e){var i=this,n=o.ajaxJson(i.postUrl,e);t.when(n).done(function(o){t.isEmptyObject(o)||(o.provincelist&&i.loadList(i.province,o.provincelist,e.provinceCode),o.citylist&&i.loadList(i.city,o.citylist,e.cityCode),o.countylist&&i.loadList(i.county,o.countylist,e.countyCode),o.townlist&&i.loadList(i.town,o.townlist,e.townCode),"function"==typeof i.options.onInitialized&&i.options.onInitialized(i))})},loadList:function(o,e,i){var n=this,a=t(o).data("areaId");if(t(o).empty(),t(o).off("changed.bs.select"),e.length>0&&n.options.emptySelect){var s=t("<option>");s.val("").text(""),t(o).append(s)}t.each(e,function(e,n){var a=t("<option>");i+""===n.code?a.val(n.code).text(n.name).attr("selected",!0):a.val(n.code).text(n.name),t(o).append(a)}),t(o).selectpicker("refresh"),"town"!==a&&t(o).on("changed.bs.select",function(){n.changeOption(this,this.value)})},changeOption:function(o,e){var i=t(o).data("areaId"),n={};n.isEnable="2"==this.options.isEnable?"":this.options.isEnable,"province"===i?(this.resetOption([this.city,this.county,this.town]),n.provinceCode=e,this.loadData(n)):"city"===i?(this.resetOption([this.county,this.town]),n.cityCode=e,this.loadData(n)):"county"===i&&(this.resetOption([this.town]),n.countyCode=e,this.loadData(n))},resetOption:function(o){t.each(o,function(){t(this).empty(),t(this).off("changed.bs.select"),t(this).selectpicker("refresh")})}},t.fn.SelectArea=e,t.fn.SelectArea.Constructor=i}(t)});